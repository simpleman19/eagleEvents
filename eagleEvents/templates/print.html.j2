{% extends "layout.html.j2" %}
{% block head_content %}
    <title>Eagle Events Event</title>
{% endblock %}

{% block body_content %}
    <h1>Test Print</h1>
        <div class="container">
        <form id="seating-chart">
            <label>Event Number:</label>
            <input id="event-num-seating-chart" type=text>
            <button onclick="testPrint()" type="button">Print Seating Chart</button>
        </form>
        </div>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script>
    function testPrint() {
        var eventNum = document.getElementById("event-num-seating-chart").value;
        $.ajax({     
            url: "/printSeatingChart/" + eventNum,
            type: "POST",
            success: function(eventNum) {
            console.log('success ' + eventNum)
            },
        }).then( (data) => {
          var downA = document.createElement('a');
          downA.setAttribute('href',"data:application/octet-stream," + encodeURIComponent(data));
          downA.setAttribute('download',"seatingChart" + eventNum + ".pdf");
          downA.click();
        });
      
}
</script>
{% endblock %}

